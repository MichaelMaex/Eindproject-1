\documentclass[titlepage, a4paper]{article}
\usepackage[utf8]{inputenc}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{hyperref}
\usepackage{cleveref}
\usepackage{geometry}
\usepackage{enumerate}
\usepackage{mathtools}
\usepackage{tikz-cd}
\usepackage{tikz}
\usepackage{todonotes}
\usetikzlibrary{fit,arrows,calc,positioning}
\usepackage[backend = biber,style=alphabetic]{biblatex}
\addbibresource{references.bib}
\usepackage[parfill]{parskip}

\makeatletter
\def\input@path{{../Bewijzen/}}

\makeatother

\author{Lucas Levrouw \and Michaël Maex \and Tomas Reunbrouck \and Supervisor: Gabor Szabo}

\title{Kaplansky's Direct Finiteness Conjecture and Sofic Groups}

\date{\today}

\newcommand{\N}{\mathbb{N}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\C}{\mathbb{C}}
\newcommand{\F}{\mathbb{F}}

\newcommand{\card}[1]{\left| #1 \right|}
\newcommand{\inclusion}[1]{\xhookrightarrow{#1}}
\newcommand{\surjection}[1]{\xtwoheadrightarrow{#1}}
\newcommand{\id}{\mathrm{id}}
\DeclareMathOperator{\sym}{Sym}
\DeclareMathOperator{\im}{im}
\DeclareMathOperator{\red}{red}



\newtheorem{theorem}{Theorem}[section]
\newtheorem{definition}[theorem]{Definition}
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{conjecture}[theorem]{Conjecture}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{property}[theorem]{Property}
\theoremstyle{remark}
\newtheorem{example}[theorem]{Example}
\newtheorem{remark}[theorem]{Remark}

\usepackage{import}
\usepackage{xifthen}
\usepackage{pdfpages}
\usepackage{transparent}

\newcommand{\incfig}[1]{%
    \def\svgwidth{.5\columnwidth}
    \import{../Figuren/}{#1.pdf_tex}
}

\begin{document}
\pagenumbering{Alph}
    \maketitle
\pagenumbering{arabic}
\tableofcontents
\pagebreak

\section{Introduction}\label{sec:intro}

\subsection*{The lay of the land}

This report discusses the conjecture of Kaplansky which states that any group ring $K[G]$ with $K$ a field is directly finite. That is, the left-invertibility of elements implies their right-invertibility. For general groups and fields, this conjecture remains unanswered. It has been resolved, however, for specific cases, such as the case in which the group $G$ is sofic (the definition of soficity follows in section 3). Some cases require the assumption of another conjecture. For example, when we talk about finite fields $K$ we have a positive result for Kaplansky’s conjecture for surjunctive groups (definition in section \ref{sec:surjunctivity}). The class of surjunctive groups is very large and possibly contains all countable groups. Therefore, if we were to have that all countable groups are surjunctive, this positively resolves Kaplansky's conjecture for finite fields and countable groups.
The assumption that all countable groups are surjunctive is known as the conjecture of Gottschalk and will be discussed in detail.
\todo{Maybe clarify that this implication works one group at a time. That is one only needs to assume surjuncitivity of a group to get direct finiteness for its group rings, and not necessarily that surjunctivity holds for every group.}

\subsection*{Historical context}

We can trace the origins of the concepts we shall discuss back to the research by John von Neumann throughout the 20th century. First, he introduced the notion of amenable groups in the context of the Banach-Tarski Paradox. It was meant as a generalisation of commutative groups on the one hand and various versions of finite groups on the other. Secondly, he lay the foundations of the study of so-called ‘cellular automata’. What a cellular automaton is, can be explained the following way. Take a set $A$ (finite or infinite), of which we call the elements ‘states’, and a ‘universe’ of ‘cells’, being a countable group $G$. Now $A^G$ (the set of maps $G \to A$) is the set of configurations. The automaton, then, is a map from $A^G$ to itself, satisfying the property that the state of a specific cell in the image is determined by the initial states of the cells in a bounded neighbourhood of this cell \cite{vonNeumann_1966} .\\
\\
These two concepts may, at first glance, seem completely unrelated. The connection becomes clear, however, when considering the question of surjectivity of these maps on the configuration space. Surjectivity in this context is, intuitively, the property that any configuration can be reached as a result from some other configuration. A configuration that can not be produced because it is not in the image of the (non-surjective) automaton is called a ‘Garden of Eden’. Importantly, such a Garden of Eden always contains a so-called ‘orphan’ which is a finite subset which cannot be produced (a finite Garden of Eden, as it were). The Garden of Eden Theorem states that a configuration is a Garden of Eden if and only if it contains such an orphan. From this theorem it follows that the injectivity of the automaton implies its surjectivity. However, the validity of this theorem has only been proven for amenable groups.
Now, groups $G$ for which it is the case that injectivity of an automaton using any finite alphabet implies surjectivity of that automaton are the afore mentioned surjunctive groups. This, then, brought research eventually to sofic groups, as this is the largest known class of groups of which all members are known to be surjunctive \cite{ceccherini-silberstein_coornaert_2010}.  

\subsection*{Goal of this report}

We shall mainly focus on the following two concepts: soficity and surjunctivity. First we shall discuss what it means for a group to be sofic. It is a very broad concept. In fact, there exist no known examples of non-sofic groups \cite{weiss_2000}. This will be illustrated by proving soficity for a few large classes of groups. Furthermore, we shall discuss its connections to other important concepts and group properties such as amenability. Secondly, this report will cover surjunctivity which is related to soficity but will be used to discuss the connection between the conjectures of Kaplansky and Gottschalk. Specifically, it is known that all sofic groups are surjunctive as well. Finally, we will discuss Kaplansky's conjecture in the context of finite fields. More precisely we will give the details of a proof that the group ring a surjunctive group and finite field is directly finite. \Cref{fig:dependency_graph} shows how how the different concepts in this report relate to each other. 

\begin{figure}[h]
	\centering
\begin{tikzcd}
	\text{$G$ is Residually Finite} \arrow[dr, Rightarrow] \\
	& \text{$G$ is Sofic} \arrow[r, Rightarrow] & \text{$G$ is Surjunctive} \arrow[r, Rightarrow] & \text{$\F_{p^{k}}[G]$ is Directly finite}\\
\text{$G$ is Amenable} \arrow[ur, Rightarrow]
\end{tikzcd}
\caption{A dependency graph of the relevant theorems/properties. }
\label{fig:dependency_graph}
\end{figure}
\section{Group rings}\label{sec:group_rings}

% Szabo's comment: Is there a reason you single out these fields here?

The setting of Kaplansky's direct finiteness conjecture is about so-called group rings. These are defined as follows


\begin{definition}\label{def:group_ring}
	Let $\mathbb K$ be a field and $G$ be a group. The \textbf{group ring} $\mathbb K[G]$ is the set of formal linear combinations
    \[
        \sum_{g \in G} \lambda_g g,
    \]
    where $\lambda_g \in \mathbb K$ for all $g \in G$ and only finitely many $\lambda_g$ are nonzero. The operations $+$ and $\cdot$ are defined by
    \begin{align*}
        \sum_{g \in G} \lambda_g g + \sum_{g \in G} \mu_g g
        &= \sum_{g \in G} (\lambda_g+\mu_g) g \\
        \left(\sum_{g \in G} \lambda_g g \right) \cdot \left(\sum_{g \in G} \mu_g g \right)
        &= \sum_{g \in G} \left( \sum_{h \in G} \lambda_{h} \mu_{h^{-1}g} \right) g.
        %\sum_{g \in G} \left( \sum_{\substack{g_1, g_2 \in G \\ g_1 g_2 = g}} \lambda_{g_1} \mu_{g_2} \right) g.
    \end{align*}
\end{definition}


\begin{theorem}
    Let $\mathbb K$ be a field and $G$ a group. Then $\mathbb K[G]$ is a unital ring.
\end{theorem}
The proof of this theorem is no more than checking the group axioms one by one. For completeness you can find it in \cref{sec:proof_groupring}.

\begin{remark}
	A group ring in general is not commutative. In fact $\mathbb{K}[G]$ is commutative if and only if $G$ is a commutative group. So we will have to be careful when dealing with these rings. 
\end{remark}

We can now state Kaplansky's conjecture by the example of the introduction in \cite{elek_szabo_2003}.

\begin{conjecture}[Kaplansky]
    Let $\mathbb K$ be a field and $G$ a group. Then $\mathbb K[G]$ is directly finite i.e. for all $a, b \in \mathbb K[G]$, the equation $ab=1$ implies $ba=1$.
\end{conjecture}\todo{reference?}

To put it shortly, Kaplansky's conjecture states that for all elements in the group ring, left-invertible implies right-invertible. If $\mathbb K$ is a finite field and $G$ is a finite group, it can quite easily be proven that $\mathbb K[G]$ is directly finite.

\begin{theorem}
    Let $\mathbb K$ be a field and $G$ be a finite group. Then $\mathbb K[G]$ is directly finite. 
\end{theorem}
\begin{proof}
    Let $a, b \in \mathbb K[G]$ and suppose $ab=1$. Now consider the map
    \[
        \phi: \mathbb K[G] \to \mathbb K[G]: x \mapsto x a
    \]
    This map is injective. To see this, let $x, y \in \mathbb K[G]$ such that $xa=ya$. Multiply on the right with $b$ and use the associativity to conclude $x=y$.
    But since $\mathbb K[G]$ is a finite set, the map must also be surjective. Therefore there exists an $x \in \mathbb K[G]$ such that $x a = 1$. Furthermore, $x = xab = b$. So we have $b=a$.
\end{proof}

Note how the argument hinges on the fact that the map $\phi$ is guaranteed to be surjective by the finiteness of $\mathbb K$ and $G$. In what follows we will define several ``finiteness'' properties of groups and try to generalise the proof above under weaker assumptions.

\section{Sofic groups}\label{sec:sofic_group}

\subsection{Definition and examples}
\todo{More references to capraro-lupini}

In this section we will introduce the concept of a \emph{sofic group}. A sofic group is a group that is ``well approximated'' by a finite permutation group. Recall that every finite group is isomorphic to the subgroup of a permutation group.

To define this, we will need a way to measure a distance between permutations. It is quite natural to define the distance between two permutation as the fraction of elements on which they differ (\cite{capraro_lupini_2015}, subsection 2.1).

\begin{definition}
    The \textbf{Hamming distance} on $\sym(n)$ is defined by
    \[
        d_{\sym(n)}(\sigma, \tau) = \frac 1 n \card{\{k \in \{1, 2, \dots,n\} \mid \sigma(k) \neq \tau(k)\}}, 
    \]
    for every $\sigma, \tau \in \sym(n)$.
\end{definition}

It is easy to show that $d_{\sym(n)}$ is a metric.
We might call a group well-approximated by finite permutation groups if there exists a sequence of ``approximate morphisms''
$(\Phi_i: G \to \sym(d_i))_{i \in \N}$ which mimic the group structure of $G$ better and better in $\sym(d_i)$ as $i$ tends to infinity. %akward phrasing?
For that, we first of all want that $d_{\sym(d_i)}(\Phi_i(g) \circ \Phi_i(h), \Phi_i(gh))$ converges to zero, for every $g$ and $h$ in $G$. Additionaly, we want that in the limit these maps have a sort of injectivity property. Therefore we will require all elements of $G$ except the identity element to converge out of the kernel of these maps. We add the following condition \footnote{One might ask why we do not require that every $g \neq 0$ converges to some fixed strictly positive number $r(g)$ instead. In fact one can show that if that is the case, one can construct another sequence of maps $\Phi_i' : G \to \sym{d_i'}$ such that $d_{\sym(d_i')}(\id, \Phi_i'(g))$ converges to $1$ for every $g$ (\cite{capraro_lupini_2015}, definition 2.2.2) }
\[
\lim_{i \to \infty} d_{\sym(d_i)}(\id,\Phi(g)) = \begin{cases}  0 & \text{if } g = e \\
                                        1 & \text{otherwise,}
                                        \end{cases}
\]
where $e$ denotes the identity element of $G$ and $\id$ is the identity permutation.
\\
We can now state the definiton of a sofic group by the example of \cite{capraro_lupini_2015}, definition 2.2.2.

We can now state the definiton of a sofic group based on \cite[section 1]{kerr_li_2010}.

\begin{definition}{}\label{def:Sofic} \todo{Reference} % Szabo: more precise reference
        Let $G$ be a countable group. We say that $G$ is \textbf{sofic} if there exists a sequence of natural numbers $(d_i)_{i \in \N}$ with associated maps $\Phi_i : G \to \sym(d_i)$ such that for all $g, h \in G$:
        \begin{enumerate}[(i)]
            \item $ \displaystyle \lim_{i \to \infty} d_{\sym(d_i)}(\Phi_i(g) \circ \Phi_i(h), \Phi_i(gh)) = 0$
            \item $ \displaystyle \lim_{i \to \infty} d_{\sym(d_i)}(\id,\Phi(g_i)) = \begin{cases}  0 & \text{if } g = e \\
                                                                                    1 & \text{otherwise,}
                                                                                    \end{cases}$
        \end{enumerate}
        %where $\delta_{e,g}$ is $1$ if $g = e$ and $0$ otherwise. (this is unnecessary as we don't use delta in the definition; that is why szabo wrote '?', not because of the 'sofic approximation'. Yours sincerely, Tomas
    \end{definition}

    We will call such a family of maps $\left(\Phi_i : G \to \sym(d_i) \right)_{i \in \N}$ \todo{make this more clear}% Szabo: ?
    a \emph{sofic approximation sequence} for $G$. It is unkown if every group is sofic.

    We can also reformulate the two conditions in a form more suitable for calculations.
     \begin{lemma}\label{def:Sofic}
        Let $G$ be a countable group. Then $G$ is sofic if and only if there exists a sequence of natural numbers $(d_i)_{i \in \N}$ with associated maps $\Phi_i : G \to \sym(d_i)$ such that for all $g, h \in G$:
        \begin{enumerate}[(i)]
            \item $\displaystyle \lim_{i\to \infty} \frac{1}{d_i} \card{\big\{k \in \{1, \dots, d_i\} \mid (\Phi_i(g) \circ \Phi_i(h))(k) = \Phi_i(gh) (k) \big\}} = 1$
            \item $\displaystyle \lim_{i\to \infty} \frac{1}{d_i}  \card{\big\{k \in \{1, \dots, d_i\} \mid \Phi_i(g)(k) = k \big\}} = \begin{cases}  0 & \text{if } g = e \\
                                                                                    1 & \text{otherwise,}
                                                                                    \end{cases}$
        \end{enumerate}

    \end{lemma}




    \begin{example}\label{ex:finite_group_sofic}
    Consider a finite group $G$. Look at the map $\phi: G \to \sym(G): g \mapsto \sigma_g$, where $\sigma_g$ is defined by $\sigma_g(h) = gh$. Clearly, $\phi$ is a homomorphism. Now we can choose $d_i = \card G$ and $\Phi_i = \phi$ for all $i \in \N$. Here we have identified $\sym(G)$ with $\sym(d_i)$. The first condition is satisfied since $\phi$ is a morphism. The second condition follows from the fact that $\sigma_g(h) = gh = h$ if and only if $g$ is the identity.
     Hence every finite group is sofic.
    \end{example}

    % Example: Z

	\begin{example}\label{ex:Z}
	Consider the group $\Z$. Take the sequence of maps $\Phi_{i}: G \to \sym(i): g \mapsto \Phi_{i}(g)$ where $\Phi_{i}(g)$ is defined as the map such that for any $k \in \{1,\dots,i\}$ : $ \Phi_{i}(g)(k) = (k+g) \mod i$. The first condition of soficity is satisfied as for any $i \in \N, g,h \in \Z, k \in \{1,\dots, i\}$ it can be said that 
	\begin{align*}
	(\Phi_{i}(g) \circ \Phi_{i}(h))(k) &= (k+h+g)\mod i \\
	&= (k+g+h)\mod i \\
	&= \Phi_{i}(g+h)(k)
\end{align*}		
Now for the second condition. It is clear that for any $i \in \N, k \in \{1,\dots, i\}$ : $\Phi_{i}(0)(k) = k$. Now take any $g \neq 0$ and consider $\Phi_{i}(g)$. For any $k \in \{1,\dots,i\}$ it is perfectly possible that $\Phi_{i}(g)(k) = k$. However this is not the case as soon as $i > |g|$. In that case, we have that $|(k+g)-k| < i$, from which it follows that $(k+g) \neq k \mod i$. Thus we have that $(k+g) \neq k \mod i$. Therefore, $\Phi_{i}(g)(k) \neq k$, proving the second condition. 
	\end{example}
    % Example: Direct product of sofic groups is sofic. 

    \begin{example}\label{ex:direct_product_sofic}
        The direct product of two sofic groups is again sofic. Consider two sofic groups $G$ and $H$. Let $(\phi_i: G \to \sym(d_i))_{i \in \N}$ and $(\psi_i: G \to \sym(e_i))_{i \in \N}$ be sofic approximation sequences for $G$ resp. $H$. Now consider $\Phi_i : G \times H \to \sym(d_i+e_i)$ for every $i \in \N$, where $\Phi_i(g, h) \in \sym(d_i+e_i)$ is defined by
        \[
            \Phi_i(g,h)(k) = \begin{cases} \phi_i(g)(k) & \text{if } 1 \leq k \leq d_i \\
            \psi_i(h)(k)+d_i & \text{if } d_i + 1 \leq k \leq e_i
            \end{cases}.
        \]
        It is not hard to show that $(\Phi_i)_{i \in \N}$ is a sofic approximation sequence for $G \times H$. % Write out proof
	Hence finite direct products conserve the soficity property. \todo{Write out proof}
    \end{example}


    \section{Properties that Imply Soficity}


    Often, it will be more convenient to check a property that implies soficity than checking it directly as we have done in the examples above. We will discuss two such properties: amenability and residually finiteness.

    \subsection{Amenability}

    Amenable groups are a large class of groups. 
    Many equivalent definitions exist. 
    An extensive study of amenable groups goes beyond the scope of this project. Hence we will not give multiple definitions and prove equivalence nor will we provide proofs for every property of amenable groups.

    For our purposes we will only define amenability for countable groups and take the Følner criterion as definition. In \cite[subsection 4.1]{kerr_li_ergodic_theory} an alternative definition is given, and it is proven that this is equivalent to the Følner criterion, as formulated below.
	\todo{Better reference}
    % Szabo: a literature reference would be a bit better
    % Lucas: Ik heb geprobeerd alle sporen van `conditie 1' uit te wissen maar misschien moeten jullie ook nog eens kijken of ik niks vergeten ben
    \begin{definition}\label{def:folner} \todo{Check is the "first condition" isn't used anymore}
	    Let $G$ be a countable group. We say that $G$ satisfies the \textbf{Følner criterion} if there exists a sequence of finite subsets (not necessarily subgroups) $F_1, F_2, \dots \subset G$ such that for all $g \in G$ 
        \[
        \lim_{i\to \infty} \frac{\card{gF_i \triangle F_i}}{\card{F_i}} = 0,
        \]
        where $\triangle$ denotes the symmetric difference.
	We say that such a sequence $(F_n)_n$ is a Følner sequence. 
    \end{definition}
    %\item for every $g \in G$ there exists an $N \in \N$ such that for all $n > N: x \in F_n$
    \Cref{fig:folner} gives a visual intuition for this notion. 
If a countable group statisfies the Følner condition, we will call the group \emph{amenable}.\footnote{One can also define amenability also for uncountable groups. In that case however, it is defined differently and the Følner criterion is not equivalent to the amenability.} 

\begin{figure}[ht]
    \centering
    \incfig{folner}
    \caption{An illustration of the Følner criterion. The limit means that the gray part will become very small compared to  $F_n$ itself as $n$ gets large.}
    \label{fig:folner}
\end{figure}

By the following lemma, we can not only exploit this for individual elements, but also for finite subsets.
\begin{lemma}\label{lem:folner_finite_subset}
    Let $F_n$ be a Følner sequence. Then for every finite subset $B \subset G$ it holds that  \[
    \lim_{n \to \infty} \frac{\card{BF_n \triangle F_n}}{\card{F_n}} = 0    
    .\] 
\end{lemma}
\begin{proof}
    Suppose that $B = \{b_1, b_2, \ldots, b_r\} $. 
    Have a look at the following calculation:
    \begin{align*}
        \lim_{n \to \infty} \frac{\card{BF_n \triangle F_n}}{\card{F_n}} &= \lim_{n \to \infty} 2 \frac{\card{BF_n \setminus F_n}}{\card{F_n}} \\
                                         &= \lim_{n \to \infty} 2 \frac{\card{\bigcup_{i = 1}^{k} (b_i F_n \setminus F_n)}}{\card{F_n}} \\
                                         &\le \lim_{n \to \infty} 2\frac{\sum_{i-1}^{k} \card{b_i F_n \setminus F_n}}{\card{F_n}} \\
                                         &= \lim_{n \to \infty} \sum_{i = 1}^{k} \frac{\card{b_iF_n \triangle F_n}}{\card{F_n}} = 0.  \\
    .\end{align*}
\end{proof}

\subsubsection{Examples}
\begin{example}\label{ex:finite_group_folner}
    Every finite group trivially satisfies the Følner condition. Indeed, we can take $F_i = G$ for every $i \in \N$. Note that $gG \triangle G = G \triangle G = \emptyset$. Hence $\card{gF_i\triangle F_i} = 0$ for all $i \in \N$.
\end{example}

\begin{example}\label{ex:integers_folner}
    The group of integers $\Z$ is also amenable. Let $F_i = \{-i, -i+1, \dots, i-1, i\}$ for every $i \in \N$ and let $k$ be an arbitrary integer. Then
    \[
        \frac{\card{(k + F_i) \triangle F_i}}{\card{F_i}}
        = \frac{\card{\{k-i, k-i+1, \dots, k+i-1, k+i\}\triangle \{-i, -i+1, \dots, i-1, i\}}}{2i+1}
        \leq \frac{2|k|}{2i+1},
    \]
    and this converges to zero as $i \to \infty$.
\end{example}

\begin{example}
	Counterexamples are at least as insightful as examples. 
	The free group $F_n = \left<x_1, x_2, \ldots, x_n \right>, n \ge 2$ is not amenable. % You should first of all properly define what the free group is
	For those not familiar with the free group, we give a brief introduction to is in \cref{sec:intro_free_group}.
	To prove this we will have to show that there does not exist a Følner sequence.
	We will prove that for every non-empty finite subset $H \subset \bar{n}$ it holds that \[
		\card{\bigcup_{i = 1}^{n} x_iH \cup x_i^{-1}H} \ge (2n-1) \card{H}
	.\] 
	We can prove this using induction on the size of $H$. 
	\begin{description}
		\item[$\card{H} = 1$:] Then $H = \{g\}$. 
			Hence the left hand side set is $\{x_1g, x_1^{-1}, x_2g, x_2^{-1}g, \ldots, x_ng, x_n^{-1}g\} $, which has cardinality $2n$. 
		\item[$\card{H} > 1$:] 
			Let $ h \in H$ be an element that has maximum number of letters in reduced form.
			Consider the set $H' = H\setminus \{h\} $. 
			By the induction hypothesis it holds that % Szabo: you should briefly define somewhere what this all means
			\todo{Szabo: you should briefly define somewhere what this all means}
			\[	
				\card{\bigcup_{i = 1}^{n} x_iH' \cup x_i^{-1}H'} \ge (2n-1) \card{H'}
			.\] 
			For at least $2n-1$ elements of $\{x_1,x_1^{-1},x_2,x_2^{-1},\ldots, x_n, x_n^{-1}\} $ the words $x_ih$ or  $x_i^{-1}h$ have more letters in reduced form than $h$. Let $\Delta = \{ h_1, h_2, \ldots, h_n\} $ be that set.  
			As multiplying by one generator changes the number of letters by $\pm 1$, we see that elements of $\Delta$ are not of the form $x_ih'$ of $x_i^{-1}h'$ for some generator $x_i$ and $h' \in H$. 
			Hence \[
				\card{\bigcup_{i = 1}^{n} x_iH \cup x_i^{-1}H}  \ge \card{\bigcup_{i = 1}^{n} x_iH' \cup x_i^{-1}H'} + 2n-1
 			.\]
			So \[
				\card{\bigcup_{i = 1}^{n} x_iH \cup x_i^{-1}H} \ge (2n-1)\card{H'} + (2n-1) = (2n-1 ) \card{H}
			.\]
	\end{description}
	This clearly contradicts the condition in \cref{lem:folner_finite_subset}. 
	We conclude that the free group is not amenable. \todo{define and reference definition of the free group} 
\end{example}

\subsubsection{Properties of Amenable Groups}

To prove that each group that satisfies the Følner criterion is sofic, we first need the following set-theoretic lemma.

\begin{lemma}\label{lem:finite_bijections} 
        Let $A$ and $B$ be finite sets such that $|A| = |B|$. Given $A' \subset A, B' \subset B$ and a bijection $f': A' \to B'$ there exists a bijection $f: A \to B$ such that $f|_{A'} = f'$. 
    \end{lemma}
    \begin{proof}
        Since $\card A = \card B$ and $\card A' = \card B'$
        \[
        \card{A \setminus A'} = \card A - \card A' = \card B - \card B' = \card{B \setminus B'}.
        \]
        Therefore there exists a bijection $g: A \setminus A' \to B \setminus B'$. Define $f: A  \to B$ by $f(x) = f'(x)$ for all $x \in A'$ and $f(x)=g(x)$ for all $x \in A \setminus A'$. Then $f$ is a bijection and $f|_{A'} = f'$.
    \end{proof}

We now state the proof.
\todo{Szabo: Is this your theorem? If you present something like this which is well-known, either provide a reference or at least point out that it is known.}
 	\begin{theorem}\label{thm:folner_sofic}
        Every countable amenable group $G$ is sofic.
    \end{theorem}
    \begin{proof}
        \input{proof_folner}
 	\end{proof}

    \begin{theorem}\label{thm:countable_abelian_folner}
        Every countable abelian group is amenable. 
    \end{theorem}
    \begin{proof}
        \input{proof_abelian_folner}
	\todo{check Szabo's remarks!}
        % check Szabo's remarks!
    \end{proof}
    As an immediate corollary we get the following well-known result.
    \begin{corollary}
    	Every countable abelian group is sofic.	
    \end{corollary}
 
	The following lemma is a known fact about about amenable groups, that we will use without proof.
	\begin{lemma} \todo{ reference?} % reference?
        \label{lem:amenable_short_exact_sequence}
        Let $A, B, C$ be groups and let $f: A\to B$ be an injective morphism and $g:B\to C$ a surjective morphism such that 
        \[\begin{tikzcd}
            A \arrow[r, "f", hook] & B \arrow[r, "g", two heads] & C
        \end{tikzcd}\]
        is an exact sequence i.e. $\im f = \ker g$. Then $A$ and $B$ are amenable if and only if $C$ is amenable.
    \end{lemma}

    \begin{corollary}\label{cor:quotient_amenable}
	    Every quotient group of an amenable group is amenable. Every normal subgroup of an amenable group is amenable. 
    \end{corollary}
    \begin{proof}
	    Let $G$ be a amenable group and let $H$ be a quotient group such that $G = \frac{H}{N}$. 
        Consider the following sequence.
        \[\begin{tikzcd}
            N \arrow[r, "\iota", hook] & G \arrow[r, "\pi", two heads] & H
        \end{tikzcd}\]
        It is clear that this sequence is exact.
	    Applying the previous lemma shows that $N$ and $H$ are amenable.
    \end{proof}
    \begin{theorem}
        Every countable solvable group is amenable. 
    \end{theorem}
    \begin{proof}
        \input{proof_solvable_amenable}
    \end{proof}

    \begin{theorem}\label{thm:rising_amenable}
    	Let $G$ be a countable group, for which there exists a set of increasing amenable subgroups $G_1 \subset  G_2 \subset  G_3 \subset  \ldots$ such that $G = \bigcup_{i = 1}^{\infty} G_i$. Then $G$ is amenable.  
    \end{theorem}
    \begin{proof}
    	Let $G = \{g_1, g_2, g_3, \ldots\} $. 
	For every $G_i$ we choose a Følner sequence $(F_{i, n})_n$. We will use these Følner sequences to construct a Følner sequence for $G$, $\mathcal{F}_n$.
	Let us fix an $n$, and consider the set $H = G_n \cap \{g_1, \ldots, g_n\}$. 
	As $H$ is a finite subset of $G_n$ we can find a Følner set $F_{n, N}$ such that for all $h \in H:$ 
	\begin{enumerate}
		\item $h \in F_{n, N}$
		\item $\frac{\card{hF_{n,N}\triangle F_{n,N}}}{\card{hF_{n,N}}} < \frac{1}{n} $
	\end{enumerate}
	We define $\mathcal{F}_m = F_{n,N}$.
	As we can do this for every $n$ we can construct $\mathcal{F}_n$ in this way.

	Now I claim that $\mathcal{F}_n$ is a Følner sequence of $G$. 
	To verify this, take $N$ such that $N > i$ and $g_i \in G_N$. For all $m >N$ we see that \[
		\frac{\card{g_i \mathcal{F}_m \triangle \mathcal{F}_m }}{\card{\mathcal{F}_m}} \le \frac{1}{m}
	.\] 
	Hence we find that \[
		\lim_{n \to \infty} \frac{\card{g_i \mathcal{F}_n \triangle \mathcal{F}_n }}{\card{\mathcal{F}_n}} = 0
	.\] 
	We conclude that $\mathcal{F}_n$ is a Følner sequence and that  $G$ is amenable. 
    \end{proof}

    \begin{lemma}\label{lem:fg_ab_amenable}
	    Every finitely generated abelian group is amenable.
    \end{lemma}
     \begin{proof}
	     Let $G = \left<a_1, a_2,\ldots, a_k \right>$ be a finitely generated group. Then \[
		     \phi: \Z^{k} \to G : (n_1, \ldots, n_k) \mapsto a_1^{n_1} a_2^{n_2} \ldots a_k^{n_k} 
	     \]
	     is a surjective groups morphism. Hence $G = \frac{Z^{k}}{\ker{\phi}}$. 
	     By \cref{cor:quotient_amenable} we see that $G$ is amenable.
	
    \end{proof}
    \begin{remark}
	    \Cref{lem:fg_ab_amenable} and \cref{thm:rising_amenable} give an alternative proof of the fact that every countable group is amenable as every countable group $G = \{g_1, g_2, g_3, \ldots\} $ can be written as the union of $G_n = \left<g_1, g_2, g_3, \ldots, g_n \right>$.
    \end{remark}


    \subsubsection{About Følner Sequences} \todo{merge this section with the previous one} % deze sectie moet misschien gemerged worden met de vorige

In this section we list some more properties obout the Følner criterion and Følner sequences. These will be used in subsection \ref{ssec:amenable_surjunctive}.
\begin{lemma}\label{lem:right_folner_sequence}
	If a group $G$ satisfies the Følner criterion, then there also exists a Følner sequence for the right action of $G$ on itself. 
	I.e. there exists a sequence $F_n$ of finite subsets of $G$ such that 
		\begin{enumerate}
		\item for every $g \in G$ there exists an  $N$ such that for all $n >N$ it holds that $g \in F_n$ 
		\item For every $g \in G$ the folowing is true: \[
				\lim_{n \to \infty} \frac{\card{F_ng \triangle F_n}}{\card{F_n}} = 0
		.\] 
	\end{enumerate}
\end{lemma}
\begin{proof}
	Let $F_n$ be a Følner sequence for the left action. 
	It's easy to check that $F_n^{-1}$ will be a Følner sequence for the right action. 
\end{proof}
\begin{remark}
    A result analogous to lemma \ref{lem:folner_finite_subset} holds for a right Følner sequence.
\end{remark}

\begin{lemma}
	Let $F_n$, $E_n$ be two (right) Følner sequences for $G$. Then $F_n \cup E_n$ is a (right) Følner sequence for $G$.
\end{lemma}
\begin{proof}
	We will prove it for ordinary (left) Følner sequences as the proof is completely analogous for right Følner sequences.
	The first property is obivously satisfied. 
	Let's have a look at the limit.
	\begin{align*}
		\lim_{n \to \infty} \frac{\card{g(F_n \cup E_n) \triangle (F_n \cup E_n)}}{\card{F_n \cup G_n}} &= 2 \lim_{n \to \infty} \frac{\card{(gF_n \cup gE_n)\setminus (F_n \cup E_n)}}{\card{F_n \cup E_n}} \\
														&= 2 \lim_{n \to \infty} \frac{\card{F_n \setminus (gF_n \cup g E_n) \cup E_n\setminus (gE_n \cup gF_n) }}{\card{F_n \cup E_n}} \\
														&\le 2 \lim_{n \to \infty} \frac{\card{gF_n \setminus F_n} + \card{gE_n \setminus E_n}}{\card{F_n \cup E_n}}\\
														&\le 2 \lim_{n \to \infty}  \frac{\card{gF_n \setminus F_n}}{\card{F_n}} + \frac{\card{gE_n \setminus E_n}}{\card{E_n}} \\
														&=  \lim_{n \to \infty} \frac{\card{gF_n \triangle F_n}}{\card{F_n}} +  \frac{\card{gE_n \triangle E_n}}{\card{E_n}}= 0  
	.\end{align*}
	Hence we see that the claim is valid.
\end{proof}
We find the following corollary. 
\begin{corollary}\label{cor:product_folner_sequence}
	Let $B \subset G$ be a finite subset and $F_n$ be a (left or right) Følner sequence of $G$. Then are $BF_n$ and $F_nB$ again Følner sequences.
\end{corollary}


\subsection{Residually Finite Groups}

Another property that implies soficity is the following.

\begin{definition}\cite{noauthor_residually_2018} \label{def:res_fin}
% betere reference?
	\todo{Non-wikipedia reference}
	We say that a group $G$ is \textbf{residually finite} if for every $g \in G\setminus\{e\}$ there exists a finite group $H$ and a homomorphisms $f:G \to H$ such that $f(g) \ne e$.
\end{definition}

\subsubsection{Examples}

\begin{example}
	Finite groups $G$ are residually finite. Let $g \in G \setminus \{e\}$ and consider $\id: G \to G: g \mapsto g$. Obviously $\id(g) \neq e$.
\end{example}

% example: Z

\begin{example}
	The group of integers $\mathbb Z$ is residually finite. Let $k \in \mathbb =z$. Consider the map $f_k: \mathbb Z \to \mathbb Z/(k+1)\mathbb Z: m \mapsto [m]_{k+1}$. Clearly, $f_k$ is a homomorphism and $f_k(k) = [k]_{k+1} \neq 0$.
\end{example}

\begin{example}
	The free group generated by $n$ elements is residually finite. 
	Consider $F_k = \left<x_1, x_2, x_3, \ldots, x_k \right>$. \todo{Reference} % Szabo: reference?
Let \[
a = x_{i_r}^{\epsilon_r n_r}x_{i_{r-1}}^{\epsilon_{r-1}n_{r-1}}x_{i_{r-2}}^{\epsilon_{r-2}n_{r-2}}x_{i_{r-3}}^{\epsilon_{r-3}n_{r-3}} \ldots x_{i_1}^{\epsilon_1n_1}
,\]
where for every $i$ it holds that $n_i \in \Z_{>0}$ and $\epsilon_i \in \left\{ -1,1 \right\} $, be any non-trivial word in reduced form. 
Our goal is to find a morphism to a finite group that doesn't map $a$ to 1. 
Define the sequence $(N_i)_i$ as $N_i = \sum_{j = 1}^{i} n_j$. 
We will construct a map from $F_k$ to $S_{N_r + 1}$, which is the symmetric group on $\{0,1, 2, \ldots, N_{r}\} $.  \todo{Szabo heeft hier problemen met de notatie, ik heb geen flauw idee waarom} % waarom hier andere notatie?
By the universal property of free groups it to define a map it is sufficient to choose for every $m$ the image of $x_m$.
We will define it as follows
\[
x_m \mapsto \prod_{\substack{j \in \{1,\ldots, r\} \\ m = i_j} } (N_{j-1} N_{j-1}+1 \ldots N_{j})^{\epsilon_i} % In this instance, this notation is really confusing. Better write it out.
,\] 
where the brackets denote cycle notation.

Using this morphism we can let $F_k$ act on the set $\{0,1,\ldots, N_r\} $. 
We will deterimne the position of $0$ after the action of $a$ by keeping track of the position of $0$ after every subsequent  action of  $x_{i_m}^{\epsilon_m n_m}$.

We claim that after acting with $x_{i_{m}}^{\epsilon_{m}n_{m}}x_{i_{m}}^{\epsilon_{m}n_{m}} \ldots x_{i_1}^{\epsilon_1n_1}$ the location of  $0$ is at $N_m$.
We will prove this claim by induction.
If  $m=0$ we essentially act with the trivial element. So $0$ is at position $0$.
 Suppose that $m \ne 0$ to zero and that the action of $x_{i_{m}}^{\epsilon_{m}n_{m}}x_{i_{m}}^{\epsilon_{m}n_{m}} \ldots x_{i_1}^{\epsilon_1n_1}$ maps $0$ to $N_m$. 
 We can act with  $x_{i_{m+1}}^{\epsilon_{m+1}n_{m+1}}$. 
 If we look at the cycles of $x_{i_{m+1}}$ we can see that $N_m$ (the position of  $0$ ) is in the cycle $(N_m \ldots N_{m+1})^{\epsilon_{m+1}}$. As zero is in this cycle can solely focus on what happens within this cycle when dealing with powers of $x_{i_{m+1}}$. 
 Taking the $\epsilon _{m+1} n_{m+1}$-th power means that this becomes the cycle $(N_m \ldots N_{m} + n_{m+1})^{n_{m+1}} = (N_{m+1} N_{m+1}-1 \ldots N_m + 1 N_m)$. 
So we see that $0$ now gets mapped to $N_m$, which proves our claim.

As the action of  $a$ maps $0$ to $N_r \ne 0$, we see that the image of  $a$ in  $S_n$ cannot be trivial. 
We conclude that $F_k$ is residually finite.

\begin{figure}[ht]
	\centering
	\input{../Figuren/free_residually_finite.tex}
	\caption{Illustration of the action in the case of $F_2 = \left<a,b \right>$}
	\label{fig:}
\end{figure}

\end{example}

% example: finitely generated groups


\subsubsection{Properties of Residually Finite Groups}

It is a well-known result that residually finite groups are sofic. \todo{reference}% reference?

    \begin{theorem} \label{thm:res_fin_sofic}
        Every countable residually finite group is sofic.
    \end{theorem}
    \begin{proof}
        \input{proof_residually_finite}
    \end{proof}

    \subsection{Examples of Sofic Groups}

    \todo{Deze sectie moet herwerkt worden naar een overview van groepen die sofisch zijn, met referenties naar de voorbeelden/stellingen waar ze werden aangehaald}

    \begin{description}
        \item[Finite groups] Every finite group, $G$ satisfies the Følner criterion, as the taking $(G)_n$ as sequence satisfies the properties in \cref{def:folner}.
        \item[Cyclic groups] All finite cyclic groups are taken care of by the previous example. We only need to check $\Z,+$. This group is residually finite as for every $n \in \Z, n \ne 0$ we can consider the natural morphism $\Z \to \Z /(|n|+1)\Z: x \mapsto x \mod |n|+1$. 
        \item[The finite direct product of Sofic groups] Let $G, H$ be sofic groups with sequence $d_i, e_i$ and maps $\sigma_i, \phi_i$ such that the properties of \cref{def:Sofic} hold. It can be (easily) verified that the sequence $(d_i + e_i)_i$ and maps $\psi_i: G \times H \to \sym(d_i + e_i): x (x \le d_i) \mapsto \sigma_i(x), x (x > d_i) \mapsto \phi_i(x -d_i) + d_i$ satisfy \cref{def:Sofic}.
        \item[Finitely generated free groups] They are residually finite.
    \end{description}

 

    \section{Surjunctivity}\label{sec:surjunctivity}

    First we define a basic concept in group theory.

    \begin{definition} % van wikipedia gehaald
	    Let $G$ be a group and $X$ be a set. Then $\alpha: G \times X \to X: (g,x) \mapsto \alpha_g(x)$ is called an \textbf{action} of $G$ on $X$ if
        \begin{enumerate}[(i)]
            \item $\forall x \in X: \alpha_e(x) = x$
            \item $\forall g,h \in G, x\in X: \alpha_{gh}(x) = \alpha_g(\alpha_h(x))$.
        \end{enumerate}
    \end{definition}

    In this section we will encounter the set of all maps from $G$ to a finite set $A$. This set will be denoted by $A^G$. We will consider this set as a topological space, the topology on $A^G$ being the product topology, where $A$ carries the discrete topology.  
    \begin{definition}
	    Let $G$ be a countable group and $A$ a finite set. Then the \textbf{right shift} $\sigma$ of $G$ on $A^G$ is defined by
        \[
        \sigma: G \times A^G \to A^G: \left(g, (x_{h})_{h \in G} \right) \mapsto \sigma_g(\omega),
        \]
        where $\sigma_g$ is defined by $\sigma_g\left( (x_{h})_{h \in G} \right) = \left( x_{hg} \right)_{h \in G}$. % Misschien is de ``rij-notatie'' hier niet aangewezen
    \end{definition}

    One can see that the right shift $\sigma$ is a $G$-action on $A^G$. We say that a map $\phi: A^G \to A^G$ \emph{commutes with the right shift} if $\sigma_g \circ \phi = \phi \circ \sigma_g$ for every $g \in G$.
    
    \begin{definition}
	    Let $G$ be a countable group. The group $G$ is called \textbf{surjunctive} if for any finite set $A$ and every injective and continuous $\phi: A^{G}\to A^{G}$ that commutes with the right shift $\sigma$ of $G$ on $A^G$ is also surjective.
    \end{definition}\todo{reference} 

    % Szabo: reference

    \begin{conjecture}[Gottschalk] \label{conj:gottschalk}
        Every countable group is surjunctive.
    \end{conjecture}

    It can be proven that every sofic group is surjunctive. However, the proof is not easy. For that reason we will prove it first for the special case of residually finite groups. We will need the following definition

    \begin{definition}
	    Let $G$ be a countable group and $A$ a finite set. Let $H$ be a subgroup of finite index. Then the set of \textbf{$H$-periodic points} is the following subset of $A^G$.
        \[
        P_H = \{ \omega \in A^G  \mid \forall h \in H: \sigma_h\omega = \omega\}
        \]
    \end{definition}

    Since $H$ is of finite index, this set is finite. \todo{Szabo: Justify! This is by no means true for an arbitrary action on a space.}
    A key lemma we will further need in our proof of theorem \ref{thm:res_fin_surjunctive} is the following:

    \begin{lemma} \label{lem:h-periodic_points}
    % The $H$-periodic points are dense in $A^G$, where $A$ is a finite set and $G$ is a residually finite countable group.
	    \todo{Szabo: Be more precise. In light of your previous remark you obviously don't mean what you write. You claim denseness for the set of all points which are periodic w.r.t. some H, or, the union of the H-periodic points over ALL H.}
    
    Let $G$ be a countable group and $A$ a finite set. Then the set of all periodic points (with respect to all subgroups of finite index)
    \[
    \bigcup_{\substack{\text{subgroup } H \\ [G : H] < \infty}} P_H
    \]
     is dense in $A^G$.
    \end{lemma}
    \begin{proof}
        Let $f:G \to A \in A^G$. We will prove that there exists a sequence of periodic points that converges to $f$. As $G$ is countable we can list its elements $G = \{1, g_1, g_2, g_3,\dots\}$. 
        Let $F_n = \{1, g_1, g_2, \dots, g_n\}$. 
        As $G$ is residually finite, for every $g \in F_n^{-1} \cdot F_n,\ g \ne 1$, we can find a map $\pi_g: G \to H_g$, where $H_g$ is a finite group and $\pi_g(g) \ne 1$.  Consider the map \[\pi = \prod_{ \substack{g\in  F_n^{-1} \cdot F_n\\ g\ne 0}} \pi_g
        .\]
        Observe that $\im(\pi)$ is finite, thus $\ker\pi$ is a subgroup of finite index of $G$. 
        For $g_i, g_j \in F, i \ne j$ it is clear that $\pi(g_i) \ne \pi(g_j)$ as $\pi(g_j^{-1} g_i) \ne 1$. 
        This means that there exists a function $\alpha: \im(\pi) \to A$ such that for all $g_i \in F_n: (\alpha \circ \pi)(g_i) = f(g_i)$.
	\todo{Szabo: "This means" needs more justification}
        Notice that $\alpha \circ \pi \in A^G$. 
        Let $h \in \ker\pi$ and consider the right $h$ shift, $\sigma_h$. 
        Take any $g \in G$. 
        Then 
        \[\sigma_h(\alpha\circ\pi)(g) = (\alpha \circ \pi)(hg) = \alpha(\pi(h)\pi(g)) = \alpha(\pi(g)) = (\alpha\circ\pi)(g).\] Thus $\sigma_g(\alpha \circ \pi) = (\alpha\circ\pi)$.
        So $\alpha\circ\pi$ is a $\ker\pi$ periodic point. 

	For every $F_n =  \{1, g_1, g_2, \dots, g_n\}$ we can construct such a function $\pi_n$ which is an $H$ periodic point \todo{Szabo: H=?}
        and that agrees with $f$ on $F_n$. It is clear that $(\pi_n)_{n\in\N}$ converges to $f$ pointwise as a function. This is sufficient to say that $(\pi_n)_n$ converges to $f$ in the product topology.
    \end{proof}

    Now we can quite easily prove the following result. We follow the proof of Weiss \cite{weiss_2000} here.
    \begin{theorem} \label{thm:res_fin_surjunctive}
    Every residually finite group is surjunctive.
    \end{theorem}
    \begin{proof}
    \input{proof_residually_finite_surjunctive}
    \end{proof}

	% Example: Apply this proof to Z
	


\todo{Szabo:The phrasing here suggests that what you are about to do has something novel to it. Is that really the case? If so, point out explicitly what it is.}

In subsection \ref{ssec:amenable_surjunctive} we present a proof of the fact that amenable groups are surjunctive. In the literature, it is usual to do this using the concept of entropy (as in \cite[section 4]{kerr_li_2010} or \cite[subsection 2.13]{capraro_lupini_2015}), or using graph theory (as in \cite[section 3]{weiss_2000}). We will however, follow an alternative approach and prove this well-known result directly from our definitions. Alas, we were unable to generalise these techniques to show that sofic groups are surjunctive. In subsection \ref{ssec:sofic_surjunctive}, we sketch how one can obtain the surjunctivity result for sofic groups using the concept of entropy.


\subsection{Amenable groups are surjunctive} \label{ssec:amenable_surjunctive}
In the following section $G$ will be a fixed amenable group, $A$ a fixed finite set and $\phi: A^{G} \to A^{G}$ a fixed continuous injective function that commutes with the right shift. 
We will also denote a fixed element of $A$ with $0$.

\begin{lemma}
	There exists a finite subset $\Gamma \subset G$ such that the value of $\phi((x_g)_g)(1)$ is only dependent on the values of $x_h$ where  $h \in \Gamma$. 
	I.e. if for some  $(x_g)_g, (y_g)_g \in A^{G}$ it holds that $x_g = y_g$ for all $g \in \Gamma$, then $\phi((x_g)_g)(1) = \phi((y_g)_g)(1)$.
\end{lemma}
\begin{proof}
	Choose any $a \in A$. As $\phi$ is continuous we know that \[
	U_a = \phi^{-1}\left( \prod_{g\in G} \begin{cases}
			\{a\} & g = 1\\
			A & g \ne 1
	\end{cases} \right)
\]
	is open. Hence we can choose some basis opens $U_{i, a}$ for some index $i \in I$ such that  \[
		U_a= \bigcup_{i \in I} U_{i,a}
	.\] 
	Notice that $\bigcup_{a \in A} U_a = A^{G}$ is a disjoint union. 
	Hence $\bigcup_{a \in A, i \in I} U_{i, a} = A^{G}$. 
	As $A^{G}$ is compact, we see that there must be a finite subset of indices $K$ such that \[
		A^{G} = \bigcup_{(i, a) \in K} U_{i, a}
	.\] 
	Every one of these basis opens is of the form \[
	U_{i,a} = \prod_{g \in G} \begin{cases}
		V_g \subset A & g \in \Gamma_{i,a}\\
		A & g \not\in \Gamma_{i,a}
	\end{cases}
	,\]
	for some finite subset $\Gamma_{i,a}$. 

	Now I claim that $\Gamma = \bigcup_{(i,a) \in K} \Gamma_{i,a}$ is set we're looking for. 
	Obivously $\Gamma$ is finite. 
	Suppose that $(x_g)_g \in A^{G}$ and $(y_g)_g \in A^{G}$ agree on $\Gamma$,
	meaning that for every $\gamma \in \Gamma$ it holds that  $x_\gamma = y_\gamma$.
	We know that for some  $(i, a) \in K$ the point $(x_g)_g \in U_{i,a}$. 
	In particular we see that $x_\gamma = y_\gamma$ for every $\gamma \in \Gamma_{i,a}$. 
	So $(y_g)_g \in U_{i, a}$. 
	Hence  $(x_g)_g , (y_g)_g$ are elements of $U_a$. 
	So  $\phi((x_g)_g) = a = \phi((y_g)_g) $.
	We conclude that $\Gamma$ is indeed the set we're looking for.
\end{proof}
From this point on we will also fix $\Gamma$. 
\begin{corollary}
	For any $k \in G$ the value of $\phi((x_g)_g)(k)$ is only dependent on the values of $x_{kh}$ where $h \in \Gamma$.
\end{corollary}	
\begin{proof}
	As $\phi$ commutes with the right shift  $\sigma_k$ we know that $\sigma_k\phi = \phi\sigma_k$. Applying the previous lemma immediately gives the result.
\end{proof}

\begin{corollary}\label{cor:differ_in_image}
	If $(x_g)_g, (y_g)_g \in A^{G}$ only differ on a set $H \subset G$, ie $\forall g \not\in H:x_g = y_g$,
	then  $\phi((x_g))$ and $\phi((y_g))$ will only differ on $H\Gamma^{-1}$.
\end{corollary}
\begin{proof}
	Take $g \not\in H\Gamma^{-1}$. Then $\phi((x_h)_h)(g)$ and $\phi((x_h)_h)(g)$ will only depend on  $\{x_{g\gamma}\mid \gamma \in \Gamma\}$ and $\{y_{g\gamma}\mid \gamma \in \Gamma\} $. But  $g\Gamma \cap H = \emptyset$. Hence $x_{g\gamma} = y_{g\gamma}$ for all $\gamma \in \Gamma$. By the previous corollary we see that $\phi((x_g)) = \phi((y_g))$.
\end{proof}

\begin{definition}
	We say that $(x_g)_g$ has support $H$ if $x_g = 0$ for all $g \not\in H$.
\end{definition}
Let $A_H$ be the set of all element of  $A^{G}$ with support $H$. We can implicitly identify $A_H$ with $A^{H}$.

\begin{lemma}\label{lem:injective_restriction}
	Let $H$ be any finite subset of $G$. Consider the function  \[
		\psi:A_H \to A ^{H\Gamma^{-1}}: (x_g) \mapsto \left(h \mapsto \phi((x_g)_g)(h)\right)
	.\]  
	This function is an injection. 
\end{lemma}
\begin{proof}
	Suppose that $x= (x_g)_g, y = (y_g)_g \in A^{H}$ have the same image under $\psi$. As $x, y$ can only differ on $ H$ their images under $\phi$ cannot differ in $G\setminus H\Gamma^{-1}$ (see \cref{cor:differ_in_image}). Because they also have the same image under $\psi$, we know that $\phi(x)$ and $\phi(y)$ must also agree on $H\Gamma^{-1}$. Hence $\phi(x) = \phi(y)$. By the injectivity of $\phi$ we find that $x = y$.
\end{proof}

At this point we're almost ready to prove that $G$ is surjunctive, i.e.\ $\phi$ is surjective. 
In order to show this will show that for any finite subset $B\subset G$ and a map $f:B \to A$ we can find a $x \in A^{G}$ such that $\phi\left(x \right) |_B  = f$. Then we can finish the proof by showing that they image of $\phi$ is dense and using compactness.

\bigskip

For now, lets fix the set $B$ and the map $f:B \to A$. 

\begin{lemma}\label{lem:copies_of_B}
	Let $F$ be any finite subset of $G$. There exists a subset $F' \subset F$ such that for any two  $s,t \in F', s\ne t$ it holds that $B\cdot s$ and  $B\cdot t$ are disjoint and $\card{F'} \ge \frac{\card{F}}{\card{B}^2} $
\end{lemma}
In other words, the set  $BF$ contains at least $\frac{\card{F}}{\card{B^2}}$ disjoint `copies' of $B$. Here copy of $B$ means $B\cdot x$ for some $x \in G$.
\begin{proof}
We will construct $F'$ in a very adhoc manner. 
Start of with $F' = \emptyset$ and $H = F$. Choose any  $f \in H$. Add $f$ to $F'$. Consider $\{g \in F | B\cdot g \cap B\cdot f \ne \emptyset\} $. This set has atmost $\card{B}^2$ elements. 
We can scrap these elements form $H \leftarrow H \setminus \{g \in F | B\cdot g \cap B\cdot f \ne \emptyset\}$. Now we take a new  $f \in H$ and repeat the process.
We can repeat this atleast $\frac{\card{F}}{\card{B^2}}$ times, therefore $F'$ contains atleast as many elements. 
By the construction we see as well that for any $s, t \in F', s\ne t$ the the copies  $B\cdot s, B\cdot t$  are disjoint.
\end{proof}

We are finally setup to proof that all amenable groups are surjunctive.
\begin{theorem}
	Let $G$ be a countable amenable group and  $A$ be finite set, where we will choose one element and denote it with $0$. Let  $\phi: A^{G} \to A^{G}$ be a injective, continuous map that commutes with the right shift. Then $\phi$ is surjective.
\end{theorem}

\begin{proof}
	Lets fix a finite subset $B \subset G$ and a map $f:B\to A$. 
	Suppose that there does not exists a  $x \in A^{G}$ such that $\phi(x)|_B = f$.
	Notice that this means that for any copy of $B$, take  $B\cdot s$, the image of $\phi$ does not contains a function  $\phi(x)$ such that when restrited to  $B\cdot s$ it is $f': B\cdot s \to A: x \mapsto f\left( x s^{-1} \right) $.

	Let $F_n$ be a right Følner sequence of $G$. By \cref{cor:product_folner_sequence} we know that $BF_n$ is a right Følner sequence as well. 

	Fix  $n$ for a moment. By \cref{lem:injective_restriction} the function \[
		\psi: A^{BF_n} \to A^{BF_n\Gamma^{-1}}: x \mapsto (g \mapsto \phi(x)(g))
	.\] 
	is injective.
	\Cref{lem:copies_of_B} states that we can choose  $ \left\lceil \frac{\card{F_n\Gamma}}{\card{B}^2} \right\rceil $ disjoint copies of $B$ in $BF_n\Gamma$. 
	We know that for every such copy of $B$ the number of possible values at the coordinates of this copy is  $\card{A}^{\card{B}} -1$ by our assumption at the start of this proof.
	Hence there exists a set $\mathcal{A} \subset A^{BF_n\Gamma^{-1}}$ of cardinality \[
		\card{\mathcal{A}} = \card{A}^{\card{BF_n\Gamma^{-1}}- \card{B}\left\lceil \frac{\card{F_n\Gamma^{-1}}}{\card{B}^2} \right\rceil } \cdot (\card{A}^{B} -1)^{\left\lceil \frac{\card{F_n\Gamma^{-1}}}{\card{B}^2} \right\rceil }
\]
such that $\im\psi \subset \mathcal{A}$. 
As $\psi$ is injective it follows that $\card{A^{BF_n}} \le \card{\mathcal{A}}$. Hence
\[
	\card{A}^{\card{BF_n}} \le 
	\card{A}^{\card{BF_n\Gamma^{-1}}- \card{B}\left\lceil \frac{\card{F_n\Gamma^{-1}}}{\card{B}^2} \right\rceil } \cdot (\card{A}^{B} -1)^{\left\lceil \frac{\card{F_n\Gamma^{-1}}}{\card{B}^2} \right\rceil }
.\]
By taking the logarithm of both sides we obtain
\[
	\card{BF_n}\ln(\card{A}) \le \card{BF_n\Gamma^{-1}} \ln(\card{A}) - \left\lceil \frac{\card{F_n\Gamma^{-1}}}{\card{B}^2} \right\rceil \left( \ln(\card{A}^{\card{B}}) - \ln(\card{A}^{\card{B}} -1) \right)   
.\]
By dividing both sides by $\card{BF_n}$ we see 
\[
	\ln(\card{A}) \le \frac{\card{BF_n\Gamma^{-1}}}{\card{BF_n}} \ln(\card{A}) - \frac{1}{\card{BF_n\Gamma^{-1}}}\left\lceil \frac{\card{F_n\Gamma^{-1}}}{\card{B}^2} \right\rceil \left( \ln(\card{A}^{\card{B}}) - \ln(\card{A}^{\card{B}} -1) \right)   
.\]
\Cref{lem:folner_finite_subset} shows that $\lim_{n \to \infty} \frac{\card{BF_n\Gamma}}{\card{BF_n}} = 1$. 
So we know as well that $\lim_{n \to \infty} \frac{1}{\card{BF_n\Gamma}} \left\lceil \frac{\card{F_n\Gamma}}{\card{B}^2} \right\rceil \ge \frac{1}{\card{B}^3} $. 
Therefore \[
	\ln(\card{A}) \le \ln(\card{A}) - \frac{1}{\card{B}^3} \left(\ln(\card{A}^{\card{B}}) - \ln(\card{A}^{B} - 1) \right)
,\]
which is clearly nonsense. 
So our initial assumption is false. 

\bigskip

This means that there exists a $x \in A^{G}$ such that $\phi(x)|_B = f$. As this is true for every  $B$ and $f:B\to A$ we see that the image of  $\phi$ must be dense in $A^{G}$. As a map on compact spaces maps closed sets on closed sets we see that the image of $\phi$ must be $A^{G}$. 
We conclude that $\phi$ is surjective!

\end{proof}


\subsection{Sofic Groups, Entropy and Surjunctive Groups}\label{ssec:sofic_surjunctive}

To prove that sofic groups are always surjunctive we define sofic entropy. The definition we present is a particular case of the more general definition formulated in paragraph 2.13.6 in \cite{capraro_lupini_2015} and is equivalent to the one given in definition 4.2 of \cite{kerr_li_2010}. 

\begin{definition}

A subshift $X \subset A^G$ with $A$ a finite set and $G := \{g_0 = e, g_1, g_2, ...\}$ any countable group is a closed subset which is invariant under the shift.\\
\\
Suppose now that $G$ is sofic and $\Sigma := (\Phi_i: G \to \sym(d_i))_{i \in \N}$ is a sofic approximation sequence. Take a subshift $X$ and a finite subset $F \subset G$. For any $\delta > 0$ and $n \in \N$ we define the function \todo{Where does this definition come from?}
		
		\[
		H_n (\delta) := \{(a_i)_i \in A^n | 
						\exists (x_i)_i \in X_n : 
						\forall g \in F: d_{S_n}((a_{\Phi^{-1}_n(g)(i)})_i,(x_{g g_i})_i) < \delta \}
		\]
		where by $X_n$ we mean the sequences in $X$ restricted to $\{e, g_1, g_2, ..., g_{n-1}\}$.\\

		Now we define entropy as 
		\[
		h_\Sigma(X) := \inf_{\delta>0} \limsup_{n \to \infty} \frac{1}{n} \log |H_n(\delta)|
		\]
\end{definition}

We shall use the following intermediate result, for which a simplified proof is provided. For the complete proof, we refer again to either \cite{capraro_lupini_2015} (paragraph 2.13.7) or \cite{kerr_li_2010} (Theorem 4.12).

\begin{lemma}
For $X \subset A^G$ a subshift we have that 
		\[
		h_\Sigma(X) = \log |A| \Leftrightarrow X = A^G
		\]
\end{lemma}
\begin{proof}
For the implication $X = A^G \Rightarrow h_\Sigma(X) = \log |A|$: assume that $X = A^G$. Now it is quite clear that for any $n \in \N$ and $\delta > 0$: $|H_n(\delta)| = |A|^n$. Indeed, for any $(a_i)_i \in A^n$ we can find a sequence $(x_i)_i \in X^n$ such that $\forall g \in F: d_{S_n}((a_{\Phi^{-1}_n(g)(i)})_i,(x_{g g_i})_i) < \delta$. Namely  $(a_i)_i$ itself. Therefore $h_\Sigma(X) = \log |A|$.\\
\\
For the implication $h_\Sigma(X) = \log |A| \Rightarrow X = A^G$: assume that $X \varsubsetneq A^G$. It is possible that a certain element of $A$ is never a component in one of the elements of $X$. However, then it is immediately clear that $h_\Sigma(X) \leq \log (|A|-1) $ and thus $h_\Sigma(X) < \log |A|$. Assume, therefore, that every element of $A$ is a component in at least one of the elements of $X$. Now there must exist some finite $F \subset G$ such that $Y_F \varsubsetneq A^G$. It can then be shown that, using this $F$, we have that
		\[
		h_\Sigma(X) \leq \log |A| - \frac{1}{|F|^2} \log (\frac{|A|^{|F|}}{|A|^{|F|} - 1}) < \log |A|
		\]
which proves the implication by contrapositive. 
\end{proof}

Now we can prove the surjunctivity of sofic groups.

\begin{theorem}
Any sofic group G is surjunctive.
\end{theorem}
\begin{proof}
\input{proof_sofic_surjunctive}
\end{proof}

	\section{Kaplansky's direct finiteness condition for finite fields}
	Let us recall the statement of Kaplansky's direct finiteness condition.
	\begin{definition}
		Let $K$ be a field and $G$ be a group. The group ring $K[G]$ is called \textbf{directly finite} if every  $a \in K[G]$, that is left invertible, is right invertible as well. 
		
	\end{definition}
	Kaplansky conjectured that all group rings are directly finite and Weiss showed that this is true for all sofic groups \cite{weiss_2000}. 
	In the case where $R$ is a finite field, Weiss did this by first proving the the surjunctivity of sofic groups.
	He finished the argument by proving that the group rings of finite fields and surjunctive groups are directly finite.  

	In this section we will give the details of a proof of that last step. 
	I.e we'll prove the following theorem. 
	\begin{theorem}\label{thm:gottschalk_kaplansky}
		Let $\F$ be a finite field and $G$ be a surjunctive group. Then $\F[G]$ is directly finite. 
	\end{theorem}
	It looks like we will need to use the surjuctivity on $\F^{G}$. Hence we need some statement that relates $\F^{G}$ to $\F[G]$.
	\begin{lemma}
		For a group $G$ and field $\mathbb K$ we can consider $\mathbb{K}^{G}$ as a left $\mathbb{K}[G]$-module, with pointwise addition and multiplication defined as
		\begin{align*}
			\cdot : (\mathbb{K}[G] , \mathbb{K}^{G}) &\longrightarrow \mathbb{K}^{G} \\
		\left( \sum_{g \in G} a_g g,  (x_g)_{g \in G}\right)  &\longmapsto \left( \sum_{h \in G} a_h x_{h^{-1}g} \right)_{g \in G}
	.\end{align*} 
	\end{lemma}
	\begin{proof}
		The proof is given in the appendix.
	\end{proof}
        \begin{remark}
        The way $\F^{G}$ is defined as a $\F[G]$-module is not completely abitrary. It should be easy to see that  $\F^{G}$ can be represented as formal sums $\sum_{g \in G} x_g g$, just like $\F[G]$, but where we now allow infinite sums. 
        The definition of the multiplication between  $\F[G]$ and  $\F^{G}$ agrees with the obvious multiplication with $\F^{G}$ represented as above. 
    \end{remark}
    
	We're now ready to give a proof of \cref{thm:gottschalk_kaplansky}.
	\begin{proof}
		Let $\F$ be a finite field and $G$ be a surjunctive group. 
		Let $a = \sum_{g \in G} a_g g \in \F[G]$ be a left invertible element with left inverse $b$, i.e.  $b a = 1$. 
		Consider the map $\phi: \F^{G} \to \F^{G}: x \mapsto a\cdot x$. Notice that this map 
		\begin{itemize}
			\item is injective. Suppose that $\phi(x) = \phi(y)$. Then $a\cdot x = a\cdot y$. So $ba\cdot x  = x$ and $ba \cdot y = 1\cdot y = y$. Hence $x = y$.
			\item commutes with the bernoulli shift  $\sigma_k$. 
				 \[
					 \sigma_k \phi(x) 
					 = \sigma_k\left( \sum_{h \in G} a_h x_{h^{-1}g} \right)_{g \in G} 
					 = \left( \sum_{h \in G} a_h x_{h^{-1}gk} \right)_{g \in G} 
					 = \left( \sum_{h \in G}a_h h \right) \cdot (x_{gk})_{g \in G} = \phi(\sigma_k(x)) 
				\]
			\item is continuous. 
			One can easily check that the set $\left\{ U_{h, t} \right\}$, where \[
			U_{h,t}:= \prod_{g \in G} \begin{cases}
				\F & h \ne g\\
				\{t\}& h = g
			\end{cases}
			.\] 
			is a subbasis of $\F^{G}$. 
			Hence, to prove that $\phi$ is continuous it is sufficient to check that $\phi^{-1}(U_{h, t})$ is open for every $h \in G, t\in \F$.
			Notice that an  $(x_g)_{g \in G} \in \F^{G}$ is in $\phi^{-1}(U_{h,t})$ if and only if $\sum_{k \in G} a_k x_{k^{-1}h} = t$. 
			Remember that $a_k$ is nonzero only for a finite number subset $X$,  $k\in X \subset G$. 	
			So $\phi^{-1}(U_{h, t})$ is closed under addition with an element of  \[
			\prod_{g \in G} \begin{cases}
				\F & hg^{-1}  \not\in X\\
				\{0\} & hg^{-1} \in X 
			\end{cases}
			.\] 
			Let  $(x_g) \in \phi^{-1}(U_{g,t})$. We see that  \[
				(x_g) \in \prod_{g \in G} \begin{cases}
					\F & hg^{-1} \not\in X\\
					\{x_g\} & hg^{-1} \in X
				\end{cases}
				\subset \phi^{-1}(U_{h, t})
			.\] 
			So $\phi^{-1}(U_{h,t})$ is open. Hence $\phi$ is continuous.			
		\end{itemize}
		By the surjunctivity of $G$ we find that $\phi$ is surjective as well. In particular this means that there exists a $y = (y_g)_{g \in G}$ such that $\phi(y) = (\delta_{g, 1})_{g \in G}$, where $\delta$ is the kronecker delta.
		By multiplying with $b$ on the left we find that \[
			 y = ba\cdot y = b\cdot (\delta_{g, 1})_{g \in G} = \left( \sum_{h \in G} b_{h} \delta_{h^{-1}g, 1} \right)_{g \in G} = \left( \sum_{h \in G} b_{h} \delta_{h, g} \right)_{g \in G}
		 = \left( b_{g} \right) _{g \in G}.\] 
		This means that \[
		a\cdot y = \left( \sum_{h \in G} a_h b_{h^{-1}g} \right)_{g \in G} = \left( \delta_{g, 1} \right) _{g \in G} 
	.\] 
	In other words
	\[
	\sum_{h \in G} a_h b_{h^{-1}g} = \delta_{g, 1}
	.\]
	But this means exactly that $ab = 1$. So  $a$ is right invertible as well. 
	\end{proof}	
	
	\pagebreak

	\section{Appendices}
	
	\subsection{Group rings are rings}\label{sec:proof_groupring}
	
	\begin{proof}
		We need to prove associativity of $+$, commutativity of $+$, existence of zero element, existence of additive inverses, associativity for $\cdot$, left distributivity, right distributivity and existence of a unit element.
		% further proof needed
		\begin{description}
		\item[associativity of $+$]
		\begin{align*}
		\left(\sum_{g \in G} \lambda_g g + \sum_{g \in G} \mu_g g\right)+ \sum_{g \in G} \nu_g g
		&= \sum_{g \in G} \left((\lambda_g g + \mu_g g)+\nu_g g\right) \\
		&= \sum_{g \in G} \left(\lambda_g g + (\mu_g g+\nu_g g)\right) \\
		&= \sum_{g \in G} \lambda_g g + \left(\sum_{g \in G} \mu_g g + \sum_{g \in G} \nu_g g \right)
		\end{align*}
	
		\item[commutativity of $+$]
		\begin{align*}
		\sum_{g \in G} \lambda_g g + \sum_{g \in G} \mu_g g
		&= \sum_{g \in G} (\lambda_g g + \mu_g g) \\
		&= \sum_{g \in G} (\mu_g g + \lambda_g g) \\
		&= \sum_{g \in G} \mu_g g + \sum_{g \in G} \lambda_g g 
		\end{align*}
	
		\item[existence of $0$]
		\begin{align*}
		\sum_{g \in G} \lambda_g g + \sum_{g \in G} 0 g
		&= \sum_{g \in G} (\lambda_g + 0)g \\
		&= \sum_{g \in G} \lambda_g g
		\end{align*}
	
		\item[existence of additive inverse]
		\begin{align*}
		\sum_{g \in G} \lambda_g g + \sum_{g \in G} (-\lambda_g g)
		&= \sum_{g \in G} (\lambda_g - \lambda_g) g \\
		&= 0
		\end{align*}
	
		\item[associativity of $\cdot$]
		\begin{align*}
		\left[\left(\sum_{g \in G} \lambda_g g \right) \cdot \left(\sum_{g \in G} \mu_g g \right)\right ] \cdot \sum_{g \in G} \nu_g g
		&= \left(\sum_{g \in G} \left( \sum_{h \in G} \lambda_{h} \mu_{h^{-1}g} \right) g \right) \cdot \sum_{g \in G} \nu_g g\\
		&= \sum_{g \in G} \sum_{x \in G} \left( \sum_{h \in G} \lambda_{h} \mu_{h^{-1}x} \right) \nu_{x^{-1}g} \,g \\
		&= \sum_{g \in G} \sum_{y \in G} \sum_{h \in G} \lambda_{h} \mu_{y} \nu_{y^{-1} h^{-1}g} \, g \\
		&= \sum_{g \in G} \sum_{h \in G} \lambda_h \left(\sum_{y \in G}\mu_{y} \nu_{y^{-1} (h^{-1}g)}\right)g \\
		&= \left(\sum_{g \in G} \lambda_g g \right) \cdot \left[ \left(\sum_{g \in G} \mu_g g \right) \cdot \sum_{g \in G} \nu_g g \right]
		\end{align*}
	
		\item[left distributivity]
		\begin{align*}
		\sum_{g \in G} \lambda_g g \cdot \left(\sum_{g \in G} \mu_g g + \sum_{g \in G} \nu_g g \right) 
		&= \sum_{g \in G} \lambda_g g \cdot \sum_{g \in G} (\mu_g + \nu_g) g \\
		&= \sum_{g \in G} \sum_{h \in G} \lambda_h (\mu_{h^{-1}g} + \nu_{h^{-1}g}) g \\
		&= \sum_{g \in G} \left(\sum_{h \in G} \lambda_h \mu_{h^{-1}g} + \lambda_h \nu_{h^{-1}g}\right) g \\
		&= \sum_{g \in G} \lambda_g g \cdot \sum_{g \in G} \mu_g g
			+ \sum_{g \in G} \lambda_g g \cdot \sum_{g \in G} \nu_g g
		\end{align*}
	
		\item[right distributivity]
		\begin{align*}
		\left(\sum_{g \in G} \lambda_g + \sum_{g \in G} \mu_g g\right) \cdot \sum_{g \in G} \nu_g g
		&= \left(\sum_{g \in G} (\lambda_g g + \mu_g) g\right) \cdot \sum_{g \in G} \nu_g g\\
		&= \sum_{g \in G} \sum_{h \in G} (\lambda_h + \mu_h) \nu_{h^{-1}g} g \\
		&= \sum_{g \in G} \sum_{h \in G} \lambda_h \nu_{h^{-1}g} g + \mu_h \nu_{h^{-1}g} g \\
		&= \sum_{g \in G} \lambda_g g \cdot \sum_{g \in G} \nu_g g + \sum_{g \in G} \mu_g g \cdot \sum_{g \in G} \nu_g 
		\end{align*}
	
		\item[existence of 1]
		\begin{align*}
		\sum_{g \in G} \delta_{g,e} g \cdot \sum_{g \in G} \lambda_g g
		&= \sum_{g \in G} \left(\sum_{h \in H} \delta_{h,e} \lambda_{h^{-1}g} \right) \\
		&= \sum_{g \in G} \lambda_{e^{-1}g} g = \sum_{g \in G} \lambda_g g.
		\end{align*}
		
		\end{description}
        \end{proof}

	\subsection{A Brief Introduction to Free Groups} \label{sec:intro_free_group}
This section is a brief introduction to the free groups, as many of our readers may not be familiar with this family of groups. 
This is in no way meant to be a rigorous construction of the group and its properties, rather it is an informal overview of its construction and it's most important property.
The details can be found in many algebra text books such as \cite[section 7.9]{artin_algebra_1991} or \cite[section 5.5]{rotman_advanced_2015}.

The construction of a free group starts with the notion of an \emph{alphabet}, which is a set of \emph{letters}/symbols. We usually denote the alphabet with $S$. In the case where the alphabet only contains two letters we usually denote these with  $a,b$. In other cases we usually index the letters $x_i$ for some index $i \in I$, such that  $S = \{x_i  \mid i \in I\} $.

Using the letters of the alphabet  $S = \{x_i \mid i \in I\} $ we can make \emph{words}. Words are finite sequences of letters and inverses of letters. We denote $W(S)$ for the words made with letters in $S$. For example if $S = \{a,b\} $ the following are words $a$, $b$, $a^{-1}$, $ab^{-1}$, $aa^{-1}b$, $aabba^{-1}$, $1$. Notice that there is also the empty word containing no letters (denoted by $1$). 
We define the \emph{reduction of a word}, $\red w$,  as the operation that repeatedly scraps any pairs $x_ix_i^{-1}$ and $x_i^{-1}x_i$, until there are no more such pairs. 
For example $\red({a^{-1}ab}) = b$, $\red(a a^{-1}) =1$ $\red(aba^{-1}b^{-1}) = aba^{-1}b^{-1}$, $\red(a^{-1}bb^{-1}a^{-1}) = 1$, $\red(x_1x_2x_3) = x_1x_2x_3$.

We can define a \emph{multiplication} on words by concatenating the sequences and reducing the result. For example $(ab)\cdot (ba) = abba$, $(ab)\cdot(b^{-1}a) = \red(abb^{-1}a) = aa$.
Using this multiplication it turns out that we can define the \emph{free group generated by $S$} as  \[
	F_S = \{\text{reduced words in $W(S)$}\}, \cdot  
.\]
We also write $F_S = \left<S \right>$, or in the case $S = \{x_1, x_2, \ldots, x_n\} $, we write $F_S = \left<x_1, x_2, \ldots, x_n \right>$. If  $S$ is finite with  $n = \card{S}$, we also write  $F_n$ as for two alphabets of the same cardinality  $S, S'$ the groups $F_S$ and $F_{S'}$ are isomorphic.


In some sense the free group, $F_S$ is the largest group that can be generated by the elements of $S$. This is formalized in the following \emph{universal property of the free group}, that characterizes the free group. 
\begin{property}[{\cite[ch. 5, p. 298]{rotman_advanced_2015}}]
	If  $S$ is a subset of a group  $F$, then $F$ is the free group generated by $S$ if and only if for every $G$ and function $f:S \to G$ there exists a unique morphism $\phi:F \to G$ such that $\phi(s) = f(s)$ for all $s \in S$.
	I.e. such that $\phi$ makes the following diagram commute:
	\[	
	\begin{tikzcd}
		F \arrow[rd, "\phi"]  \\
		S \arrow[u, hook] \arrow[r, "f"] & G
	\end{tikzcd}
\]

\end{property}


\subsection{$\mathbb K^G$ is a $\mathbb K[G]$-module}
	We check the module axioms one by one.
        In the following calculations $r = \sum_{g \in G}^{} r_g g,\ s = \sum_{g \in G}^{} s_g g$ are arbitrary elements of $\mathbb{K}[G]$ and $x = (x_g)_{g \in G}, y = (y_g)_{g \in G}$ are arbitrary elements of $\mathbb{K}^{G}$.
        \begin{description}
            \item[left distributivity] 
                \begin{align*}
                    r\cdot (x+y) &= \left( \sum_{h \in G} r_h (x_{h^{-1} g} + y_{h^{-1} g}) \right)_{g \in G} \\
                             &= \left( \sum_{h \in G} r_h x_{h^{-1} g} \right)_{g \in G}  + \left( \sum_{h \in G} r_h y_{h^{-1}g} \right)_{g \in G}  \\
                             &= r\cdot x + r\cdot y 
                .\end{align*}
            \item[right distributivity]
                \begin{align*}
                    (r + s)\cdot x &= \left( \sum_{h \in G} (r_h + s_h) x_{h^{-1} g} \right)_{g \in G}  \\
                               &= \left( \sum_{h \in G} r_h x_{h^{-1}g} \right)_{g \in G} + \left( \sum_{h \in G} s_{h} x_{h^{-1}g}  \right)_{g \in G} \\ 
                               &= r\cdot x + s \cdot y 
                .\end{align*}
        
            \item[associativity]
                 \begin{align*}
                     (rs)\cdot x &= \left( \sum_{g_1 \in G} \sum_{g_2 \in G} r_{g_1} s_{g_2} g_1 g_2 \right) \cdot (x_{g})_{g \in G} \\
                             &= \left( \sum_{h \in G} \sum_{k \in G} r_{k}s_{k^{-1}h} h\right) \cdot  \left( x_{g} \right)_{g \in G} \\
                             &= \left( \sum_{h \in G} \sum_{k \in G} r_k s_{k^{-1}h} x_{h^{-1}g} \right)_{g \in G}  \\
                             &= \left( \sum_{h \in G} \sum_{k \in G} r_k s_{k^{-1}h} x_{(k^{-1} h)^{-1}(k^{-1}g)} \right)_{g \in G}  \\
                             &= \left(\sum_{h \in G} r_h h\right) \cdot  \left( \sum_{k \in G} s_{k} x_{k^{-1}g} \right)_{g \in G} \\
                             &= r(s\cdot x) 
                .\end{align*}
            \item[unity]
                \begin{align*}
                    1\cdot x &= (x_{1^{-1} g})_{g \in G} \\
                         &= x\\
                .\end{align*}
        \end{description}

	\pagebreak
	\printbibliography

\end{document}
