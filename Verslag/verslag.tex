\documentclass[a4paper]{report}
\usepackage[utf8]{inputenc}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{hyperref}
\usepackage{cleveref}
\usepackage{geometry}
\usepackage{enumerate}
\usepackage{mathtools}
\usepackage{tikz-cd}
\usepackage[backend = biber]{biblatex}
\addbibresource{references.bib}

\makeatletter
\def\input@path{{../Bewijzen/}}
%or: \def\input@path{{/path/to/folder/}{/path/to/other/folder/}}
\makeatother

\author{Lucas Levrouw \and Michaël Maex \and Tomas Reunbrouck}

\title{Kaplansky's Conjectures and Sofic Groups}

\date{\today}

\newcommand{\N}{\mathbb{N}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\C}{\mathbb{C}}
\newcommand{\F}{\mathbb{F}}

\newcommand{\card}[1]{\left| #1 \right|}
\newcommand{\inclusion}[1]{\xhookrightarrow[#1]}
\newcommand{\surjection}[1]{\xtwoheadrightarrow[#1]}
\DeclareMathOperator{\sym}{Sym}
\DeclareMathOperator{\im}{Im}


\newtheorem{theorem}{Theorem}
\newtheorem{definition}{Definition}
\newtheorem{lemma}{Lemma}
\newtheorem{conjecture}{Conjecture}
\newtheorem{example}{Example}


\begin{document}
\pagenumbering{Alph}
    \maketitle
\pagenumbering{arabic}

    \chapter{Sofic groups}

\section{Definition and examples}

    \begin{definition}\label{def:Sofic}
        Let $\Gamma$ be a countable group. We say that $\Gamma$ is sofic if for all $i\in \N$ there exist $d_i \in \N$ and maps $\sigma_i : \Gamma \to \sym(d_i)$ such that $\forall\ g, h \in \Gamma$:
        \begin{enumerate}[(i)]
            \item $\displaystyle \lim_{i\to \infty} \frac{1}{d_i} \card{\big\{k \in \{1, \dots, d_i\} \mid \sigma_{i,g} \circ \sigma_{i,h}(k) = \sigma_{i, g*h} (k) \big\}} = 1$
            \item $\displaystyle \lim_{i\to \infty} \frac{1}{d_i}  \card{\big\{k \in \{1, \dots, d_i\} \mid \sigma_{i,g}(k) = k \big\}} = \delta_{e,g}$,
        \end{enumerate}
        where $\delta_{e,g}$ is $1$ if $g = e$ and $0$ otherwise.
    \end{definition}

    % Alternative definitions here (Capraro-Lupini definition, example 2.1.8)

    % Example: Z

    % Example: Direct product of sofic groups is sofic. 


    \section{Properties that imply soficity}

    \begin{lemma}\label{lem:finite_bijections} 
        Let $A$ and $B$ be finite sets such that $|A| = |B|$. Given $A' \subset A, B' \subset B$ and a bijection $f': A' \to B'$ there exists a bijection $f: A \to B$ such that $f|_{A'} = f'$. 
    \end{lemma}
    \begin{proof}
        Since $\card A = \card B$ and $\card A' = \card B'$,
        \[
        \card{A \setminus A'} = \card A - \card A' = \card B - \card B' = \card{B \setminus B'}.
        \]
        Therefore there exists a bijection $g: A \setminus A' \to B \setminus B'$. Define $f: A  \to B$ by $f(x) = f'(x)$ for all $x \in A'$ and $f(x)=g(x)$ for all $x \in A \setminus A'$. Then $f$ is a bijection and $f|_{A'} = f'$.
    \end{proof}

    \begin{definition}\cite{noauthor_folner_2019} \label{def:folner}
        Let $G$ be a group. We say that $G$ satisfies the Følner criterion if there exists a sequence of finite subsets (not necessarily subgroups) $F_1, F_2, \dots \subset G$ such that 
        \begin{enumerate}
            \item for every $g \in G$ there exists an $N \in \N$ such that for all $n > N: x \in F_n$
            \item for all $g \in G$ 
            $$\lim_{i\to \infty} \frac{\card{gF_i \triangle F_i}}{\card{F_i}} = 0, $$
            where $\triangle$ denotes the symmetric difference.
        \end{enumerate}
    \end{definition}

To prove that each group that satisfies the Følner criterion, is sofic, we first need the following set-theoretic lemma.


 	\begin{theorem}
        Every group $G$ that satisfies the Følner criterion is sofic.
    \end{theorem}
    \begin{proof}
        \input{proof_folner}
 	\end{proof}

\begin{definition}\cite{noauthor_residually_2018} \label{def:res_fin}
       We say that a group $G$ is residually finite if it adheres to one of the following equivalent properties.
        \begin{enumerate}
            \item For every $g \in G\backslash\{e\}$ there exists a finite group $H$ and a homomorphisms $f:G \to H$ such that $f(g) \ne e$.
            \item For every $g \in G\backslash\{e\}$ there exists a normal subgroup $H$ such that $g \notin H$.
            \item The intersection of all subgroups of finite index is $\{e\}$.
            \item The intersection of all normal subgroups is $\{e\}$.
            \item $G$ can be embedded in a direct product of finite groups.
        \end{enumerate}
    \end{definition}

% Proof that these are equivalent?


    \begin{theorem}
        Every countable residually finite group is sofic.
    \end{theorem}
    \begin{proof}
        \input{proof_residually_finite}
    \end{proof}

    \subsection{Examples of Sofic Groups}
    \begin{description}
        \item[Finite groups] Every finite group, $G$ satisfies the Følner criterion, as the taking $(G)_n$ as sequence satisfies the properties in \cref{def:folner}.
        \item[Cyclic groups] All finite cyclic groups are taken care of by the previous example. We only need to check $\Z,+$. This group is residually finite as for every $n \in \Z, n \ne 0$ we can consider the natural morphism $\Z \to \Z /(|n|+1)\Z: x \mapsto x \mod |n|+1$. 
        \item[The finite direct product of Sofic groups] Let $G, H$ be sofic groups with sequence $d_i, e_i$ and maps $\sigma_i, \phi_i$ such that the properties of \cref{def:Sofic} hold. It can be (easily) verified that the sequence $(d_i + e_i)_i$ and maps $\psi_i: G \times H \to \sym(d_i + e_i): x (x \le d_i) \mapsto \sigma_i(x), x (x > d_i) \mapsto \phi_i(x -d_i) + d_i$ satisfy \cref{def:Sofic}.
        \item[Finitely generated free groups] They are residually finite.
    \end{description}
    \paragraph{conjectures}
    \begin{itemize}
        \item subgroups of sofic groups
        \item free product of sofic groups
        \item direct product/sum of infinite groups
    \end{itemize}

    \begin{theorem}\label{thm:countable_abelian_folner}
        Every countable abelian group satisfies the Følner criterion. 
    \end{theorem}
    \begin{proof}
        \input{proof_abelian_folner}
    \end{proof}

    \begin{lemma}
        \label{lem:amenable_short_exact_sequence}
        Let $A, B, C$ be groups with morphisms $f:A\to B, g:B\to C$ such that
        \[\begin{tikzcd}
            A \arrow[r, "f", hook] & B \arrow[r, "g", two heads] & C
        \end{tikzcd}\] is a short exact sequence. Then $A$ and $B$ are amenable if and only if $C$ is amenable.
    \end{lemma}
    \begin{theorem}
        Every countable solvable group is amenable. 
    \end{theorem}
    \begin{proof}
        \input{proof_solvable_amenable}
    \end{proof}

    \section{Surjunctivity}

    In this section we will encounter the set of all maps from $G$ to a finite set $A$. This set will be denoted by $A^G$. We will consider this set as a topological space, the topology on $A^G$ being the product topology, where $A$ carries the discrete topology.

    \begin{definition}
        Let $G$ be a countable group and $A$ a finite set. Then the right shift $\sigma$ is defined by
        \[
        \sigma: G \times A^G \to A^G: \left(g, (x_{h})_{h \in G} \right) \mapsto \sigma_g(\omega),
        \]
        where $\sigma_g$ is defined by $\sigma_g\left( (x_{h})_{h \in G} \right) = \left( x_{gh} \right)_{h \in G}$. % Misschien is de ``rij-notatie'' hier niet aangewezen
    \end{definition}

    One can see that $\sigma$ is a $G$-action on $A^G$.
    \begin{definition}
        % Let $G$ be a countable group and $A$ a finite set. 
        % Let $\gamma: G\to \hom{A^{G}}:g \mapsto \left( (x_{h})_{h \in G} \mapsto \left( x_{gh} \right)_{h \in G}  \right)$.
        % The group $G$ is called surjunctive if every injective and continuous $\phi: A^{G}\to A^{G}$ that commutes with $\gamma$ is surjective.
        Let $G$ be a countable group and $A$ a finite set. The group $G$ is called surjunctive if every injective and continuous $\phi: A^{G}\to A^{G}$ that commutes with $\sigma_g$ for all $g \in G$ is also surjective.
    \end{definition}

    \begin{conjecture}[Gottschalk] \label{conj:gottschalk}
        Every countable group is surjunctive.
    \end{conjecture}
    % \begin{conjecture}[Gottschalk] \label{conj:gottschalk}
    %   Let $G$ be a countable group and $A$ a finite set. 
    %   Let $\gamma: G\to \hom{A^{G}}:g \mapsto \left( (x_{h})_{h \in G} \mapsto \left( x_{gh} \right)_{h \in G}  \right)$.
    %   Then every injective and continuous $\phi: A^{G}\to A^{G}$ that commutes with $\gamma$ is surjective.
    % \end{conjecture}

    It can be proven that every sofic group is surjunctive. However, the proof is not easy. That's why we'll prove it first for the special case of residually finite groups. We will need the following definition

    \begin{definition}
        Let $G$ be a countable group and $A$ a finite set. Let $H$ be a subgroup of finite index. Then the set of $H$-periodic points is the following subset of $A^G$.
        \[
        P_H = \{ \omega \in A^G  \mid \forall h \in H: \sigma_h\omega = \omega\}
        \]
    \end{definition}

    Since $H$ is of finite index, this set is finite. % more explanation needed
    A key lemma we will further need in our proof of theorem ... is the following

    \begin{lemma} \label{lem:h-periodic_points}
    The $H$-periodic points are dense in $A^G$, where $A$ is finite set and $G$ is a residually finite countable group.
    \end{lemma}
    \begin{proof}
        Let $f:G \to A \in A^G$. We'll prove that there exists a sequence of periodic points that converges to $f$. As $G$ is countable we can lists its elements $G = \{1, g_1, g_2, g_3,\dots\}$. 
        Let $F_n = \{1, g_1, g_2, \dots, g_n\}$. 
        As $G$ is residually finite, for every $g \in F_n^{-1} \cdot F_n,\ g \ne 1$, we can find a map $\pi_g: G \to H_g$, where $H_g$ is a finite group and $\pi_g(g) \ne 1$.  Consider the map \[\pi = \prod_{g\in  F_n^{-1} \cdot F_n,\ g\ne 0} \pi_g
        .\]
        Observe that $\im(\pi)$ is finite, thus $\ker\pi$ is a subgroup of finite index of $G$. 
        For $g_i, g_j \in F, i \ne j$ is is clear that $\pi(g_i) \ne \pi(g_j)$ as $\pi(g_j^{-1} g_i) \ne 1$. 
        This means that there exists a function $\alpha: \im(\pi) \to A$ such that for all $g_i \in F_n: (\alpha \circ \pi)(g_i) = f(g_i)$. 
        Notice that $\alpha \circ \pi \in A^G$. 
        Let $h \in \ker\pi$ and consider the right $h$ shift, $\sigma_h$. 
        Take any $g \in G$. 
        Then 
        \[\sigma_h(\alpha\circ\pi)(g) = (\alpha \circ \pi)(hg) = \alpha(\pi(h)\pi(g)) = \alpha(\pi(g)) = (\alpha\circ\pi)(g).\] Thus $\sigma_g(\alpha \circ \pi) = (\alpha\circ\pi)$.
        So $\alpha\circ\pi$ is a $\ker\pi$ periodic point. 

        For every $F_n =  \{1, g_1, g_2, \dots, g_n\}$ we can construct such a function $\pi_n$ which is an $H$ periodic point and that agrees with $f$ on $F_n$. It is clear that $(\pi_n)_{n\in\N}$ converges to $f$ pointwise as a function. This is sufficient to say that $(\pi_n)_n$ converges to $f$ in the product topology.
    \end{proof}
    \begin{theorem} \label{thm:res_fin_surjunctive}
    Every residually finite group is surjunctive.
    \end{theorem}
    \begin{proof}
    \input{proof_residually_finite_surjunctive}
    \end{proof}

    

	\section{Outline of the proof of Kaplansky's direct finiteness condition for finite fields}

	\begin{lemma}
		For group $G$ and field $\mathbb K$ then $\mathbb{K}[[G]]$ is a left and right $\mathbb{K}[G]$-module
	\end{lemma}
	\begin{proof}
		TODO
	\end{proof}
	\begin{lemma}
		For finite field $\F$ and group $G$ there is a natural bijection from $\F[[G]]$ to $\F^{G}$ given by \begin{align*}
			i: \F[[G]] &\longrightarrow \F^{G} \\
			\sum_{g \in G}^{ } x_{g}g &\longmapsto (x_g)_g
		.\end{align*}
	\end{lemma}
	\begin{proof}
		TODO
	\end{proof}
	So we can consider $\F^G$ as a module over $\F[G]$. We will implicitely identify both sets.
	Let $a\in \F[G]$ be left invertible with left inverse $b$. Consider the function $\phi: \F[[G]] \to \F[[G]]: x \mapsto a\cdot x \cdot b$. This function is injective, continous and commutes with $\gamma$ (\textbf{this still needs to be proven}).
	By the Gottschalk conjecture \ref{conj:gottschalk}, we find that $\phi$ is surjective. Therefore there exists a $y \in \F[[G]]$ such that \[
		\phi(y) = a \cdot y \cdot b = b
	.\] 
	Which means that  \[
	b a y b a = y =b b a
	.\] 
	This means that $y \in \F[G]$. Further we find that \[
		a y b a = a y  = b a = 1
.\] We conclude that $a$ is right invertible as well. 
	\printbibliography
\end{document}
